/* device.js v0.0.2 - 3/8/2013
   http://
   Copyright (c) 2013 Javi Jimenez Villar - Licensed MIT */
window.Device={addEvent:function(n,e,t){return n.addEventListener?n.addEventListener(e,t,!1):n.attachEvent?n.attachEvent("on"+e,t):n["on"+e]=t},removeEvent:function(n,e,t){return n.removeEventListener?n.removeEventListener(e,t,!1):n.detachEvent?n.detachEvent("on"+e,t):n["on"+e]=null}},Device.Alarm=function(){var n,e,t,r,i,o,a,u;return n="alarm",navigator.alarms=navigator.alarms||navigator.mozAlarms,o=(null!=(a=navigator.alarms)?a.addEventListener:void 0)||navigator.mozSetMessageHandler,t=function(n,e){var t;return t=navigator.alarms.all(),u(t,n,e)},e=function(n,e,t,r,i){var o,a;return a=e?"respectTimezone":"ignoreTimezone",o=navigator.alarms.add(n,a,t),u(o,r,i)},i=function(n,e){var t;return t=navigator.alarms.remove(n),u(t,e,errorr)},r=function(e){return o?o(n,e):void 0},u=function(n,e,t){return null!=n&&(n.onsuccess=e),null!=n&&(n.onerror=t),n},{add:e,remove:i,all:t,event:r}}(Device),Device.Audio=function(){var n,e,t,r,i;return t=document.createElement("audio"),i=document.createElement("audio"),n=function(n){return n?(r(i,n),t.addEventListener("ended",function(){return this.currentTime=0},!1)):t.pause()},e=function(n){return r(i,n)},r=function(n,e){return n.setAttribute("src",e),n.play()},{background:n,play:e}}(),Device.Camera=function(){var n,e,t;return navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,t=null,n=function(n,r){return null!=navigator.getUserMedia?t=navigator.getUserMedia(n,function(n){return null!=r?r.call(r,n):void 0},function(n){return e(n)}):e("Device no available")},e=function(n){return console.error("Device.Camera [ERROR] - ",n)},{get:n}}(Device),Device.Connection=function(n){var e,t,r;return e={ONLINE:"online",OFFLINE:"offline"},r=function(t){return n.addEvent(window,e.ONLINE,t)},t=function(t){return n.addEvent(window,e.OFFLINE,t)},{online:r,offline:t}}(Device),Device.FullScreen=function(){var n,e,t;return e=function(n){return("function"==typeof n.requestFullscreen?n.requestFullscreen():void 0)||("function"==typeof n.webkitRequestFullScreen?n.webkitRequestFullScreen():void 0)||("function"==typeof n.requestFullScreen?n.requestFullScreen():void 0)||("function"==typeof n.mozRequestFullScreen?n.mozRequestFullScreen():void 0)},n=function(n){return null==n&&(n=document),("function"==typeof n.cancelFullScreen?n.cancelFullScreen():void 0)||("function"==typeof n.webkitCancelFullScreen?n.webkitCancelFullScreen():void 0)||("function"==typeof n.mozCancelFullScreen?n.mozCancelFullScreen():void 0)||("function"==typeof n.exitFullscreen?n.exitFullscreen():void 0)},t=function(n){return null==n&&(n=document),n.fullScreen||n.webkitIsFullScreen||n.mozFullScreen},{enable:e,cancel:n,enabled:t}}(),Device.Gps=function(){var n,e,t,r,i,o,a,u,c,l,v;return l=null,v=null,n={success:null,error:null},e={enableHighAccuracy:!1,timeout:1e4,maximumAge:6e4},t=function(n,e,t){return c()?navigator.geolocation.getCurrentPosition(function(e){return a(n,e)},function(n){return e.call(e,n)},t):void 0},o=function(n,e,t){return c()?v=navigator.geolocation.watchPosition(function(e){return a(n,e)},function(n){return e.call(e,n)},t):void 0},a=function(n,e){return l=e.coords,l.accuracy=Math.round(l.accuracy),l.altitude=Math.round(l.altitude),n.call(n.call,l)},r=function(){return l},i=function(){return u()},c=function(){return navigator.geolocation?(u(),!0):(console.error("Device.Gps [ERROR]: navigator.geolocation is innacesible."),!1)},u=function(){return l=null,v?(navigator.geolocation.clearWatch(v),v=null):void 0},{get:t,watch:o,position:r,stop:i}}(Device),Device.Notification=function(){var n,e,t,r;return n=function(n,e,t,r){return navigator.notification.alert(n,e,t,r)},t=function(n,e,t,r){return navigator.notification.confirm(n,e,t,r)},e=function(n){return navigator.notification.beep(n)},r=function(n){return navigator.notification.vibrate(n)},{alert:n,confirm:t,beep:e,vibrate:r}}(),Device.Orientation=function(n){var e,t,r,i;return e={ORIENTATION:"deviceorientation",MOTION:"devicemotion",COMPASS_CALIBRATION:"compassneedscalibration"},window.Orientation=window.DeviceOrientationEvent||window.OrientationEvent,window.Motion=window.DeviceMotionEvent,t=function(t){return n.addEvent(window,e.ORIENTATION,function(n){var e,r,i,o,a,u;return n.webkitCompassHeading&&(i=n.webkitCompassHeading+window.orientation),window.DeviceOrientationEvent?(o=n.gamma,a=n.beta,u=null,r=n.alpha):window.OrientationEvent&&(o=90*n.x,a=-90*n.y,u=n.z,r=null),e={x:Math.round(o),y:Math.round(a),z:u,direction:Math.round(r),heading:i},t.call(this,e)})},r=function(t){return n.addEvent(window,e.MOTION,function(n){var e,r;return e=n.accelerationIncludingGravity,e=n.acceleration,r={x:e.x.toFixed(2),y:e.y.toFixed(2),z:e.z.toFixed(2)},t.call(this,r)})},i=function(t){return n.addEvent(window,e.COMPASS_CALIBRATION,t)},{change:t,motion:r,onNeedsCalibration:i}}(Device),Device.Storage=function(){var n,e,t,r,i,o,a,u;return n={PERSISTENT:"localStorage",SESSION:"sessionStorage"},e=function(e,t){return o(n.PERSISTENT,e,t)},t=function(e,t){return o(n.SESSION,e,t)},o=function(n,e,t){return n=window[n],e?t?u(n,e,t):null===t?a(n,e):i(n,e):r(n)},u=function(n,e,t){return n.setItem(e,JSON.stringify(t))},a=function(n,e){return n.removeItem(e)},r=function(n){return n.clear()},i=function(n,e){return JSON.parse(n.getItem(e))},{local:e,session:t}}();